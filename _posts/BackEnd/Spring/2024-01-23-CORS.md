---
title: CORS (Cross-Origin Resource Sharing)
date: 2024-01-23 00:00:00 +00:00
categories: [BackEnd, Spring]
tags:
  [
    BackEnd,
    Spring
  ]
---

## 1. ê°œìš”

- Cross-Origin Resource Sharing
- êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ (Cross-Origin Resource Sharing, CORS)ëŠ” ë‹¨ì–´ ê·¸ëŒ€ë¡œÂ **ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ê³µìœ ì— ëŒ€í•œ í—ˆìš©/ë¹„í—ˆìš© ì •ì±…**

## 2. URLì˜ êµ¬ì¡°

![Untitled](https://github.com/KimHyungkeun/KimHyungkeun.github.io/assets/12759500/0d395496-0f4d-40f3-ae22-159c93698216)


## 3. ë™ì¼ ì¶œì²˜ (Same Origin Policy)

- ë™ì¼ ì¶œì²˜(Same-Origin) ì„œë²„ì— ìˆëŠ” ë¦¬ì†ŒìŠ¤ëŠ” ììœ ë¡œì´ ê°€ì ¸ì˜¬ìˆ˜ ìˆì§€ë§Œ, ë‹¤ë¥¸ ì¶œì²˜(Cross-Origin) ì„œë²„ì— ìˆëŠ” ì´ë¯¸ì§€ë‚˜ ìœ íŠœë¸Œ ì˜ìƒ ê°™ì€ ë¦¬ì†ŒìŠ¤ëŠ” ìƒí˜¸ì‘ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ë§ì´ë‹¤.
- ì¶œì²˜(Origin)ì˜ ë™ì¼í•¨ì€ ë‘ URLì˜ êµ¬ì„± ìš”ì†Œ ì¤‘Â **Protocol(Scheme), Host, Port ì´ 3ê°€ì§€ë§Œ ë™ì¼**í•˜ë‹¤ë©´ ë™ì¼ ì¶œì²˜ë¡œ íŒë‹¨í•œë‹¤.

![Untitled 1](https://github.com/KimHyungkeun/KimHyungkeun.github.io/assets/12759500/478dbbd7-1938-4597-859c-f1f1a353f429)


ì •ë¦¬í•˜ìë©´ ê°™ì€ í”„ë¡œí† ì½œ, í˜¸ìŠ¤íŠ¸, í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ê·¸ ë’¤ì˜ ë‹¤ë¥¸ ìš”ì†ŒëŠ” ë‹¤ë¥´ë”ë¼ë„ ê°™ì€ ì¶œì²˜ë¡œ ì¸ì •ëœë‹¤.

![Untitled 2](https://github.com/KimHyungkeun/KimHyungkeun.github.io/assets/12759500/f7f2cd58-bfc9-41d2-858b-5f1701abfc3d)


## 4. Config ì˜ˆì œ

[https://dev.exd0tpy.xyz/entry/Spring-Boot-CORS-ì„¤ì •í•˜ê¸°](https://dev.exd0tpy.xyz/entry/Spring-Boot-CORS-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0)

1) WebConfig íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì„¤ì •

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOrigins("*")
                .allowedMethods("GET", "POST")
                .maxAge(3000);
}
```

2) Annotaion ì‚¬ìš© (@CrossOrigin)

```java
@RestController
@RequestMapping("/somePath")
public class SomeController {

    @CrossOrigin(origins="*")
    @RequestMapping(value = "/{something}",method = RequestMethod.DELETE)
    public ResponseEntity<String> delete(@PathVariable Long reservationNo) throws Exception{
    }

}
```

## 5. CORS ì‹œë‚˜ë¦¬ì˜¤

**1) ì˜ˆë¹„ ìš”ì²­ (Preflight Request)**

- ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ì„ ë³´ë‚¼ë•Œ í•œë²ˆì— ë°”ë¡œ ë³´ë‚´ì§€ì•Šê³ , ë¨¼ì €Â **ì˜ˆë¹„ ìš”ì²­**ì„ ë³´ë‚´ ì„œë²„ì™€ ì˜ í†µì‹ ë˜ëŠ”ì§€ í™•ì¸í•œ í›„Â **ë³¸ ìš”ì²­**ì„ ë³´ë‚¸ë‹¤.
- ì¦‰, ì˜ˆë¹„ ìš”ì²­ì˜ ì—­í• ì€ ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ë¸Œë¼ìš°ì € ìŠ¤ìŠ¤ë¡œ ì•ˆì „í•œ ìš”ì²­ì¸ì§€ ë¯¸ë¦¬ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.

![Untitled 3](https://github.com/KimHyungkeun/KimHyungkeun.github.io/assets/12759500/3e10b1b0-d388-4a90-b3b6-76d8b1a57051)


**2) ë‹¨ìˆœ ìš”ì²­ (Simple Request)**

- **ì˜ˆë¹„ ìš”ì²­(Prefilght)ì„ ìƒëµí•˜ê³ **Â **ë°”ë¡œ ì„œë²„ì— ì§í–‰ìœ¼ë¡œ ë³¸ ìš”ì²­**ì„ ë³´ë‚¸ í›„,Â ì„œë²„ê°€ ì´ì— ëŒ€í•œ ì‘ë‹µì˜ í—¤ë”ì—Â Access-Control-Allow-Origin í—¤ë”ë¥¼Â ë³´ë‚´ì£¼ë©´ ë¸Œë¼ìš°ì €ê°€Â CORSì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë°©ì‹

![Untitled 4](https://github.com/KimHyungkeun/KimHyungkeun.github.io/assets/12759500/10164936-a3a9-4b42-83e7-b03f7dc23ce5)


ë‹¤ë§Œ, ì‹¬í”Œí•œ ë§Œí¼ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ì—ë§Œ ì˜ˆë¹„ ìš”ì²­ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜Â **3ê°€ì§€ ê²½ìš°ë¥¼ ë§Œì¡±**Â í• ë•Œ ë§Œ ê°€ëŠ¥í•˜ë‹¤.

1. **ìš”ì²­ì˜ ë©”ì†Œë“œëŠ”Â GET,Â HEAD,Â POSTÂ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.**
2. **Accept,Â Accept-Language,Â Content-Language,Â Content-Type,Â DPR,Â Downlink,Â Save-Data,Â Viewport-Width,Â WidthÂ í—¤ë”ì¼ ê²½ìš°ì—ë§Œ ì ìš©ëœë‹¤.**
3. **Content-Type í—¤ë”ê°€Â application/x-www-form-urlencoded,Â multipart/form-data,Â text/plainì¤‘ í•˜ë‚˜ì—¬ì•¼í•œë‹¤. ì•„ë‹ ê²½ìš° ì˜ˆë¹„ ìš”ì²­ìœ¼ë¡œ ë™ì‘ëœë‹¤.**

ì´ì²˜ëŸ¼ ë‹¤ì†ŒÂ **ê¹Œë‹¤ë¡œìš´ ì¡°ê±´**ë“¤ì´ ë§ê¸° ë•Œë¬¸ì—, ìœ„ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±ë˜ì–´ ë‹¨ìˆœ ìš”ì²­ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì€ ë“œë¬¼ë‹¤ê³  ë³´ë©´ ëœë‹¤.

ì™œëƒí•˜ë©´ ëŒ€ë¶€ë¶„ HTTP API ìš”ì²­ì€Â ~~text/xml~~Â ì´ë‚˜Â ~~application/json~~Â ìœ¼ë¡œ í†µì‹ í•˜ê¸° ë•Œë¬¸ì— 3ë²ˆì§¸ Content-Typeì´ ìœ„ë°˜ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

**ë”°ë¼ì„œ ëŒ€ë¶€ë¶„ì˜ API ìš”ì²­ì€ ê·¸ëƒ¥ ì˜ˆë¹„ ìš”ì²­(preflight)ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤ ë¼ê³  ì´í•´í•˜ë©´ ëœë‹¤.**

**3) ì¸ì¦ëœ ìš”ì²­ (Credentialed Request)**

- ì¸ì¦ëœ ìš”ì²­ì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ì—ê²ŒÂ **ìê²© ì¸ì¦ ì •ë³´(Credential)**ë¥¼ ì‹¤ì–´ ìš”ì²­í• ë•Œ ì‚¬ìš©ë˜ëŠ” ìš”ì²­ì´ë‹¤.
- ì—¬ê¸°ì„œ ë§í•˜ëŠ”Â **ìê²© ì¸ì¦ ì •ë³´**ë€ ì„¸ì…˜ IDê°€ ì €ì¥ë˜ì–´ìˆëŠ”Â ì¿ í‚¤(Cookie)Â í˜¹ì€Â Authorization í—¤ë”ì— ì„¤ì •í•˜ëŠ”Â í† í°Â ê°’ ë“±ì„ ì¼ì»«ëŠ”ë‹¤.
- ì¦‰, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¼ë°˜ì ì¸ JSON ë°ì´í„° ì™¸ì—ë„ ì¿ í‚¤ ê°™ì€ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•´ì„œ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì„œë²„ë¡œ ì „ë‹¬í• ë•Œ CORSì˜ ì„¸ê°€ì§€ ìš”ì²­ì¤‘ í•˜ë‚˜ì¸ ì¸ì¦ëœ ìš”ì²­ìœ¼ë¡œ ë™ì‘ëœë‹¤ëŠ” ë§ì´ë©°, ì´ëŠ” ê¸°ì¡´ì˜ ë‹¨ìˆœ ìš”ì²­ì´ë‚˜ ì˜ˆë¹„ ìš”ì²­ê³¼ëŠ” ì‚´ì§ ë‹¤ë¥¸ ì¸ì¦ í˜•íƒœë¡œ í†µì‹ í•˜ê²Œ ëœë‹¤.

ì¶œì²˜ ë° ì°¸ê³  : [https://inpa.tistory.com/entry/WEB-ğŸ“š-CORS-ğŸ’¯-ì •ë¦¬-í•´ê²°-ë°©ë²•-ğŸ‘](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F)
